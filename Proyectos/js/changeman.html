<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Change Man</title>
  </head>
  <body>
    <ol id="lista">
      <li>Perico</li>
      <li>Juanico</li>
      <ul>
      <li>Jose</li>
      <ul>
      <li>Roman</li>
      <li>Marco</li>
      <li>Rodrigo</li>
      </ul>
      <li>Jose</li>
      <li>Lorenzo</li>
      <ul>
      <li>Dimas</li>
      <li>Gestas</li>
      <li>Malakatos</li>
      <li>Jose</li>
      </ul>
      </ul>
      <li>Sofoclis</li>
      </ol>

    <script>
   
      
      function changeMan(obj, man1, man2) {
        // Verificamos si el elemento es un li
        console.log(obj.tagName);
        if (obj.tagName == "LI") {
          console.log(obj.textContent.trim().toUpperCase());
          // Comparamos el texto con man1 quitanos espacios e igualamos todo a mayusulas 
          if (obj.textContent.trim().toUpperCase() == man1.toUpperCase()) {
                    // Cambiamos a man2
                    obj.textContent = man2;
                }
        } else {
          // Si no es un li llama a la funciÃ³n para los hijos haciendo uso de la recursividad
          Array.from(obj.children).map((v) => changeMan(v, man1, man2));
        }
      }

      changeMan(document.getElementById("lista"),'JOSE','PEPE');

      
    </script>
  </body>
</html>
